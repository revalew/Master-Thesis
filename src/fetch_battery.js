let gatherBatteryDataAjaxRunning=false;async function gatherBatteryData() {if (gatherBatteryDataAjaxRunning) return;gatherBatteryDataAjaxRunning=true;let postData={ action: 'getBatteryInfo' };try {let response=await fetch('/api',{method: 'POST',headers: { 'Content-Type': 'application/json' },body: JSON.stringify(postData),});if (response.ok) {let data=await response.json();let volts=parseFloat(data.battery_voltage);document.getElementById('volts').innerHTML=volts.toFixed(2);let amps=parseFloat(data.battery_current);document.getElementById('current').innerHTML=amps.toFixed(2);let percent=parseFloat(data.battery_percentage);document.getElementById('percent').innerHTML=percent.toFixed(2);} else {console.log('Network response was not ok.');}} catch (error) {console.log('Fetch error:',error);} finally {gatherBatteryDataAjaxRunning=false;}};document.addEventListener('DOMContentLoaded',function () {gatherBatteryData();let interval=700;setInterval(gatherIMUData,interval);setInterval(gatherIMUData_2,interval);setInterval(gatherBatteryData,interval*10);})